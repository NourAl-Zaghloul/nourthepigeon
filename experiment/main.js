let Trials = [
    [ // Civic_Generous
        {
            Header: "Civic_Generous vs. Intellectual_Creative",
            Text: "Find my generous friend!",
            Stimuli: ["./Images/Civic_Generous/beth-macdonald-tbzwvLjZvJ0-unsplash.jpg","./Images/Intellectual_Creative/dushawn-jovic-2w7qbVHOqYU-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Civic_Generous vs. Moral_Brave",
            Text: "Find my generous friend!",
            Stimuli: ["./Images/Civic_Generous/beth-macdonald-tbzwvLjZvJ0-unsplash.jpg","./Images/Moral_Brave/elijah-hiett-KCzCfkic-ig-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Civic_Generous vs. Performance_Confident",
            Text: "Find my generous friend!",
            Stimuli: ["./Images/Civic_Generous/beth-macdonald-tbzwvLjZvJ0-unsplash.jpg","./Images/Performance_Confident/miguel-henriques-RfiBK6Y_upQ-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Civic_Generous vs. Other_Loving",
            Text: "Find my generous friend!",
            Stimuli: ["./Images/Civic_Generous/beth-macdonald-tbzwvLjZvJ0-unsplash.jpg","./Images/Other_Loving/juliane-liebermann-O-RKu3Aqnsw-unsplash.jpg"],
            Correct: 0
        }
    ],
    [ // Civic_GoodHelper
        {
            Header: "Civic_GoodHelper vs. Intellectual_Curious",
            Text: "My next friend is a good helper, where are they?",
            Stimuli: ["./Images/Civic_GoodHelper/annie-spratt-9VpI3gQ1iUo-unsplash.jpg","./Images/Intellectual_Curious/jess-zoerb-EsKJSScedAs-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Civic_GoodHelper vs. Moral_Kind",
            Text: "My next friend is a good helper, where are they?",
            Stimuli: ["./Images/Civic_GoodHelper/annie-spratt-9VpI3gQ1iUo-unsplash.jpg","./Images/Moral_Kind/lucas-hoang-NBznejj5knw-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Civic_GoodHelper vs. Performance_HardWorking",
            Text: "My next friend is a good helper, where are they?",
            Stimuli: ["./Images/Civic_GoodHelper/annie-spratt-9VpI3gQ1iUo-unsplash.jpg","./Images/Performance_HardWorking/frank-mckenna-9sJMyPKlKhw-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Civic_GoodHelper vs. Other_Joyful",
            Text: "My next friend is a good helper, where are they?",
            Stimuli: ["./Images/Civic_GoodHelper/annie-spratt-9VpI3gQ1iUo-unsplash.jpg","./Images/Other_Joyful/marcus-lewis-7jCQyO6X_FA-unsplash.jpg"],
            Correct: 0
        }
    ],
    [ // Intellectual_Creative
        {
            Header: "Intellectual_Creative vs. Civic_Generous",
            Text: "Where is my creative friend?",
            Stimuli: ["./Images/Intellectual_Creative/alice-dietrich-FwF_fKj5tBo-unsplash.jpg", "./Images/Civic_Generous/deva-darshan-T1nBk_9ob-8-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Intellectual_Creative vs. Moral_Kind",
            Text: "Where is my creative friend?",
            Stimuli: ["./Images/Intellectual_Creative/alice-dietrich-FwF_fKj5tBo-unsplash.jpg", "./Images/Moral_Kind/mariola-grobelska-5zFQmBzJ12A-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Intellectual_Creative vs. Performance_GoodTeammate",
            Text: "Where is my creative friend?",
            Stimuli: ["./Images/Intellectual_Creative/alice-dietrich-FwF_fKj5tBo-unsplash.jpg", "./Images/Performance_GoodTeammate/adria-crehuet-cano-eOo5SKU3cK4-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Intellectual_Creative vs. Other_Loving",
            Text: "Where is my creative friend?",
            Stimuli: ["./Images/Intellectual_Creative/alice-dietrich-FwF_fKj5tBo-unsplash.jpg", "./Images/Other_Loving/kelly-sikkema-FqqaJI9OxMI-unsplash.jpg"],
            Correct: 0
        }
    ],
    [ // Intellectual_Curious
        {
            Header: "Intellectual_Curious vs. Civic_GoodHelper",
            Text: "Can you find my curious friend?",
            Stimuli: ["./Images/Intellectual_Curious/houcine-ncib-P5L8gICF0CI-unsplash.jpg", "./Images/Civic_GoodHelper/child-7674748_1280.jpg"],
            Correct: 0
        },
        {
            Header: "Intellectual_Curious vs. Moral_Kind",
            Text: "Can you find my curious friend?",
            Stimuli: ["./Images/Intellectual_Curious/houcine-ncib-P5L8gICF0CI-unsplash.jpg", "./Images/Moral_Kind/mikita-yo-Cj2Xjuer2H0-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Intellectual_Curious vs. Performance_Confident",
            Text: "Can you find my curious friend?",
            Stimuli: ["./Images/Intellectual_Curious/houcine-ncib-P5L8gICF0CI-unsplash.jpg", "./Images/Performance_Confident/thisisengineering-raeng-WRrpTw0TcVo-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Intellectual_Curious vs. Other_Joyful",
            Text: "Can you find my curious friend?",
            Stimuli: ["./Images/Intellectual_Curious/houcine-ncib-P5L8gICF0CI-unsplash.jpg", "./Images/Other_Joyful/mi-pham-FtZL0r4DZYk-unsplash.jpg"],
            Correct: 0
        }
    ],
    [ // Intellectual_Smart
        {
            Header: "Intellectual_Smart vs. Civic_Generous",
            Text: "This friend is smart, can you find them?",
            Stimuli: ["./Images/Intellectual_Smart/clay-banks-OcnokxBmwQg-unsplash.jpg", "./Images/Civic_Generous/elaine-casap-qgHGDbbSNm8-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Intellectual_Smart vs. Moral_Brave",
            Text: "This friend is smart, can you find them?",
            Stimuli: ["./Images/Intellectual_Smart/clay-banks-OcnokxBmwQg-unsplash.jpg", "./Images/Moral_Brave/leio-mclaren-nGwhwpzLGnU-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Intellectual_Smart vs. Performance_HardWorking",
            Text: "This friend is smart, can you find them?",
            Stimuli: ["./Images/Intellectual_Smart/clay-banks-OcnokxBmwQg-unsplash.jpg", "./Images/Performance_HardWorking/john-arano-h4i9G-de7Po-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Intellectual_Smart vs. Other_Loving",
            Text: "This friend is smart, can you find them?",
            Stimuli: ["./Images/Intellectual_Smart/clay-banks-OcnokxBmwQg-unsplash.jpg", "./Images/Other_Loving/lawrence-crayton-FWX91ORBR6E-unsplash.jpg"],
            Correct: 0
        }
    ],
    [ // Moral_Brave
        {
            Header: "Moral_Brave vs. Civic_Generous",
            Text: "Where is my brave friend?",
            Stimuli: ["./Images/Moral_Brave/cade-prior-V_WOKRbR1dw-unsplash.jpg", "./Images/Civic_Generous/gabe-pierce-chN-Rz5F4Mc-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Moral_Brave vs. Intellectual_Smart",
            Text: "Where is my brave friend?",
            Stimuli: ["./Images/Moral_Brave/cade-prior-V_WOKRbR1dw-unsplash.jpg", "./Images/Intellectual_Smart/nishaan-ahmed-6w1S7xS6AnM-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Moral_Brave vs. Performance_GoodTeammate",
            Text: "Where is my brave friend?",
            Stimuli: ["./Images/Moral_Brave/cade-prior-V_WOKRbR1dw-unsplash.jpg", "./Images/Performance_GoodTeammate/helena-lopes-PGnqT0rXWLs-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Moral_Brave vs. Other_Loving",
            Text: "Where is my brave friend?",
            Stimuli: ["./Images/Moral_Brave/cade-prior-V_WOKRbR1dw-unsplash.jpg", "./Images/Other_Loving/mother-of-wilde-J3lINZ2XEhc-unsplash.jpg"],
            Correct: 0
        }
    ],
    [ // Moral_Kind
        {
            Header: "Moral_Kind vs. Civic_GoodHelper",
            Text: "Where is my kind friend hiding?",
            Stimuli: ["./Images/Moral_Kind/imad-alassiry-63AEgjnu28U-unsplash.jpg", "./Images/Civic_GoodHelper/female-2467210_1280.jpg"],
            Correct: 0
        },
        {
            Header: "Moral_Kind vs. Intellectual_Creative",
            Text: "Where is my kind friend hiding?",
            Stimuli: ["./Images/Moral_Kind/imad-alassiry-63AEgjnu28U-unsplash.jpg", "./Images/Intellectual_Creative/robert-collins-lP_FbBkMn1c-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Moral_Kind vs. Performance_Confident",
            Text: "Where is my kind friend hiding?",
            Stimuli: ["./Images/Moral_Kind/imad-alassiry-63AEgjnu28U-unsplash.jpg", "./Images/Performance_Confident/miguel-henriques-RfiBK6Y_upQ-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Moral_Kind vs. Other_Joyful",
            Text: "Where is my kind friend hiding?",
            Stimuli: ["./Images/Moral_Kind/imad-alassiry-63AEgjnu28U-unsplash.jpg", "./Images/Other_Joyful/surface-X1GZqv-F7Tw-unsplash.jpg"],
            Correct: 0
        }
    ],
    [ // Performance_Confident
        {
            Header: "Performance_Confident vs. Civic_Generous",
            Text: "This friend is so confident, can you find them for me?",
            Stimuli: ["./Images/Performance_Confident/megaphone-1480342_1280.jpg", "./Images/Civic_Generous/kira-auf-der-heide-IPx7J1n_xUc-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Performance_Confident vs. Intellectual_Curious",
            Text: "This friend is so confident, can you find them for me?",
            Stimuli: ["./Images/Performance_Confident/megaphone-1480342_1280.jpg", "./Images/Intellectual_Curious/marten-newhall-uAFjFsMS3YY-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Performance_Confident vs. Moral_Kind",
            Text: "This friend is so confident, can you find them for me?",
            Stimuli: ["./Images/Performance_Confident/megaphone-1480342_1280.jpg", "./Images/Moral_Kind/mikita-yo-Cj2Xjuer2H0-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Performance_Confident vs. Other_Loving",
            Text: "This friend is so confident, can you find them for me?",
            Stimuli: ["./Images/Performance_Confident/megaphone-1480342_1280.jpg", "./Images/Other_Loving/ben-white-EMZxDosijJ4-unsplash.jpg"],
            Correct: 0
        }
    ],
    [ // Performance_GoodTeammate
        {
            Header: "Performance_GoodTeammate vs. Civic_Generous",
            Text: "Can you find my friend who is a good teammate?",
            Stimuli: ["./Images/Performance_GoodTeammate/adria-crehuet-cano-eOo5SKU3cK4-unsplash.jpg", "./Images/Civic_Generous/kira-auf-der-heide-IPx7J1n_xUc-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Performance_GoodTeammate vs. Intellectual_Creative",
            Text: "Can you find my friend who is a good teammate?",
            Stimuli: ["./Images/Performance_GoodTeammate/adria-crehuet-cano-eOo5SKU3cK4-unsplash.jpg", "./Images/Intellectual_Creative/tanaphong-toochinda-nZhHajBMDu0-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Performance_GoodTeammate vs. Moral_Brave",
            Text: "Can you find my friend who is a good teammate?",
            Stimuli: ["./Images/Performance_GoodTeammate/adria-crehuet-cano-eOo5SKU3cK4-unsplash.jpg", "./Images/Moral_Brave/sean-benesh-VnmbcgAfL3Q-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Performance_GoodTeammate vs. Other_Joyful",
            Text: "Can you find my friend who is a good teammate?",
            Stimuli: ["./Images/Performance_GoodTeammate/adria-crehuet-cano-eOo5SKU3cK4-unsplash.jpg", "./Images/Other_Joyful/surface-X1GZqv-F7Tw-unsplash.jpg"],
            Correct: 0
        }
    ],
    [ // Performance_HardWorking
        {
            Header: "Performance_HardWorking vs. Civic_GoodHelper",
            Text: "Can you find my hardworking friend?",
            Stimuli: ["./Images/Performance_HardWorking/devn-V7T7_A0FIIY-unsplash.jpg", "./Images/Civic_GoodHelper/girl-936739_640.jpg"],
            Correct: 0
        },
        {
            Header: "Performance_HardWorking vs. Intellectual_Smart",
            Text: "Can you find my hardworking friend?",
            Stimuli: ["./Images/Performance_HardWorking/devn-V7T7_A0FIIY-unsplash.jpg", "./Images/Intellectual_Smart/ying-ge--Yo1cWJVKFY-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Performance_HardWorking vs. Moral_Kind",
            Text: "Can you find my hardworking friend?",
            Stimuli: ["./Images/Performance_HardWorking/devn-V7T7_A0FIIY-unsplash.jpg", "./Images/Moral_Kind/mariola-grobelska-5zFQmBzJ12A-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Performance_HardWorking vs. Other_Joyful",
            Text: "Can you find my hardworking friend?",
            Stimuli: ["./Images/Performance_HardWorking/devn-V7T7_A0FIIY-unsplash.jpg", "./Images/Other_Joyful/marcus-lewis-7jCQyO6X_FA-unsplash.jpg"],
            Correct: 0
        }
    ],
    [ // Other_Joyful
        {
            Header: "Other_Joyful vs. Civic_GoodHelper",
            Text: "Find my joyful friend!",
            Stimuli: ["./Images/Other_Joyful/ben-white-4K2lIP0zc_k-unsplash.jpg", "./Images/Civic_GoodHelper/ismael-paramo-tnVdQGmWtb0-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Other_Joyful vs. Intellectual_Curious",
            Text: "Find my joyful friend!",
            Stimuli: ["./Images/Other_Joyful/ben-white-4K2lIP0zc_k-unsplash.jpg", "./Images/Intellectual_Curious/maria-ballesteros-FUgR_MEqgJg-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Other_Joyful vs. Moral_Kind",
            Text: "Find my joyful friend!",
            Stimuli: ["./Images/Other_Joyful/ben-white-4K2lIP0zc_k-unsplash.jpg", "./Images/Moral_Kind/lucas-hoang-NBznejj5knw-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Other_Joyful vs. Performance_HardWorking",
            Text: "Find my joyful friend!",
            Stimuli: ["./Images/Other_Joyful/ben-white-4K2lIP0zc_k-unsplash.jpg", "./Images/Performance_HardWorking/vignesh-moorthy-R4CdUesiZKc-unsplash.jpg"],
            Correct: 0
        }
    ],
    [ // Other_Loving
        {
            Header: "Other_Loving vs. Civic_Generous",
            Text: "Where is my loving friend?",
            Stimuli: ["./Images/Other_Loving/ashwini-chaudhary-monty-GmDVGjqeVEk-unsplash.jpg", "./Images/Civic_Generous/klara-kulikova-WcV2YkM3Dls-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Other_Loving vs. Intellectual_Smart",
            Text: "Where is my loving friend?",
            Stimuli: ["./Images/Other_Loving/ashwini-chaudhary-monty-GmDVGjqeVEk-unsplash.jpg", "./Images/Intellectual_Smart/ying-ge--Yo1cWJVKFY-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Other_Loving vs. Moral_Brave",
            Text: "Where is my loving friend?",
            Stimuli: ["./Images/Other_Loving/ashwini-chaudhary-monty-GmDVGjqeVEk-unsplash.jpg", "./Images/Moral_Brave/sean-benesh-VnmbcgAfL3Q-unsplash.jpg"],
            Correct: 0
        },
        {
            Header: "Other_Loving vs. Performance_Confident",
            Text: "Where is my loving friend?",
            Stimuli: ["./Images/Other_Loving/ashwini-chaudhary-monty-GmDVGjqeVEk-unsplash.jpg", "./Images/Performance_Confident/thisisengineering-raeng-WRrpTw0TcVo-unsplash.jpg"],
            Correct: 0
        }
    ]
]

Trials = Tree.Utilities.Shuffle(Trials)
let exp_block = [];

let correctSide = Tree.Utilities.Shuffle(['Left', 'Right','Left', 'Right','Left', 'Right','Left', 'Right','Left', 'Right','Left', 'Right']);
let chooseTrial = [0,1,2,3]

for(let i=0; i<Trials.length; i++){
    if(i % 4 == 0){
        chooseTrial = Tree.Utilities.Shuffle(chooseTrial);
    }
    
    exp_block.push(Trials[i][chooseTrial[i % 4]]);

    // Randomize side (and update correct answer to compensate)
    if(correctSide[i] == 'Right'){
        exp_block[i].Correct = 1;
        exp_block[i].Stimuli.reverse();
    }
}

savedata_LillyDevelopment = function(){
    let csvdata = "id,date,age,header,stimuliClicked,stimuliCorrect,imgClicked,imgCorrect,timestamp,timeRT\n";
    
    for(let i=0;i<Data.Results.length;i++){
        csvdata += `${Data.Results[i].id},${Data.Results[i].date},${Data.Results[i].age},${Data.Results[i].header},${Data.Results[i].stimuliClicked},${Data.Results[i].stimuliCorrect},${Data.Results[i].imgClicked},${Data.Results[i].imgCorrect},${Data.Results[i].timestamp},${Data.Results[i].timeRT}\n`
    }

    let a = document.createElement("a");
    let file = new Blob([csvdata], {type: 'text/csv;charset=utf-8'});
    a.href = URL.createObjectURL(file);
    a.download = `LillyDevelopment_${Data.Time.date}.csv`;
    a.click();

    delete a;
}

Tree.Systems.save_and_refresh = function(Condition, Loc, argJSON){
    switch(Condition){
        case 'activate':
            savedata_LillyDevelopment();
            location.reload();
            return false;
            break;
    }
}

Sapling = {
    Template: "LogicGroup",
    Children: [
        
        {
            Template: "AgeForm"
        },
        { // Explanation
            Template: "Instruction",
            Text: [
                "I've lost my friends, can you help me find them?"
            ]
        },
        
        {
            Template: "LogicGroup",
            deactivate_LoopLimit: 12,
            Children: [
                { 
                    Template: "Fixation",
                    waitTime: 1500,
                    styleButton: "height: 24vh; width: 24vh; border-radius: 50%; background-color: red;"
                },
                {
                    Template: "XAFCwithText",
                    trials: exp_block
                }
            ]
        },
        { // Ending
            Template: "Instruction",
            NextButtonText: "Reset (:",
            Text: [
                "All done!"
            ]
        },
        {
            Template: "Codeblock",
            customCodeblock: "save_and_refresh",
        }
    ]
};

Tree.Procedures.begin(Sapling);